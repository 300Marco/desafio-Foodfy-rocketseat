{% extends "layout.njk" %}

{% block title %}
    <title>Detalhes Foodfy</title>
{% endblock %}

{% block header %}
    <header class="header-background">
        <div class="header-menu-box">
            <div class="title">
                <h2 class="sr-only">Admin Foodfy</h2>

                <a href="/admin/recipes">
                    <img src="/assets/admin-logo.png" alt="Foodfy">
                </a>
            </div>
        </div>
    </header>
{% endblock %}

{% block contents %}
    <form method="POST" action="/admin/recipes?_method=put">
        <div class="recipe-detail">
            <span class="detail-title">Editando Receita</span>

            <div class="buttons">
                <button class="delete-button">Deletar</button>
                <button class="edit-button" type="submit">Salvar Receita</button>
            </div>
        </div>

        {% include "admin/fields.njk" %}

        <input 
            type="hidden"
            name="id"
            value="{{recipe.id}}"
        >
    </form>

    <script>
        addIngrdient();
        addPreparation();

        function addIngrdient() {
            const btnAddIngredient = document.querySelector('.add-ingredient');
            const box = document.querySelector('.box-ingredients');

            btnAddIngredient.addEventListener('click', () => {
                const newInput = document.createElement('input');
                
                newInput.setAttribute('type', 'text');
                newInput.setAttribute('name', 'ingredients[]');

                box.appendChild(newInput);
            });
        }

        function addPreparation() {
            const btnAddPreparation = document.querySelector('.add-preparation');
            const box = document.querySelector('.box-preparation');

            btnAddPreparation.addEventListener('click', () => {
                const newInput = document.createElement('input');
                
                newInput.setAttribute('type', 'text');
                newInput.setAttribute('name', 'preparation[]');

                box.appendChild(newInput);
            });
        }
        
    </script>
{% endblock %}

{% block footer %}
    
{% endblock %}

{% block scripts %}
    
{% endblock %}